<!-- blog_page.html -->

{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}
    <div style="text-align: center;">
        <h1>{{ page.title }}</h1>
        <p class="meta">{{ page.date }}</p>

        {% with authors=page.authors.all %}
            {% if authors %}
                <h3>Posted by:</h3>
                <ul>
                    {% for author in authors %}
                        <li style="display: inline">
                            {% image author.author_image width-40 height-60 style="vertical-align: middle" %}
                            {{ author.name }}
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}

        <div class="intro">{{ page.intro }}</div>

        {{ page.body|richtext }}

        {% for item in page.gallery_images.all %}
            <div style="margin: 10px; display: flex; justify-content: center; align-items: center; height: 300px;">
                {% image item.image width-320 height-240 %}
                <p>{{ item.caption }}</p>
            </div>
        {% endfor %}
    </div>

    <div style="text-align: center;">
        <p><a href="{{ page.get_parent.url }}">Return to blog</a></p>

        <!-- Previous Page Link -->
        {% if page.previous_page %}
            <span style="float: left;">
                <strong>Previous Page:</strong>
                <a href="{% pageurl page.previous_page %}">{{ page.previous_page.title }}</a>
            </span>
        {% endif %}

        <!-- Next Page Link -->
        {% if page.next_page %}
            <span style="float: right;">
                <strong>Next Page:</strong>
                <a href="{% pageurl page.next_page %}">{{ page.next_page.title }}</a>
            </span>
        {% endif %}
    </div>

    <!-- Tags Section -->
    {% with tags=page.tags.all %}
        {% if tags %}
            <div class="tags" style="text-align: center;">
                <h3>Tags</h3>
                {% for tag in tags %}
                    <a href="{% slugurl 'tags' %}?tag={{ tag }}"><button type="button">{{ tag }}</button></a>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

{% endblock %}

